<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Youjiang Site Blog</title>
        <link>https://yuyoujiang.github.io/blog</link>
        <description>Youjiang Site Blog</description>
        <lastBuildDate>Wed, 10 Apr 2024 16:41:19 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[yolo-live-demo]]></title>
            <link>https://yuyoujiang.github.io/blog/yolo-live-demo</link>
            <guid>https://yuyoujiang.github.io/blog/yolo-live-demo</guid>
            <pubDate>Wed, 10 Apr 2024 16:41:19 GMT</pubDate>
            <description><![CDATA[Hello everyone, my name’s Youjiang, I’m the Edge AI application engineer at Seeed Studio. It’s my pleasure to be here with you to discover the potential of the Jetson Orin and YOLOv8, within the retail market. For this live demo, I'll show you how to use Ultralytics YOLOv8 to implement queue management and deploy the application on our reComputer Jetson Orin NX edge device.]]></description>
            <content:encoded><![CDATA[<p>Hello everyone, my name’s Youjiang, I’m the Edge AI application engineer at Seeed Studio. It’s my pleasure to be here with you to discover the potential of the Jetson Orin and YOLOv8, within the retail market. For this live demo, I'll show you how to use Ultralytics YOLOv8 to implement queue management and deploy the application on our reComputer Jetson Orin NX edge device.</p>
<p>So now, let's execute the python script to see what happens. All of the inferencing parts take place on the Jetson device.</p>
<p>(播放demo最终生成的视频)</p>
<p>In fact, I only spent four hours doing this. It took me three hours to find the input video, and I just spent one hour to setup Jetson runtime environment and modifying the test code. This means that both Jetson and Ultralytics are very user-friendly.</p>
<p>Doing such a demo roughly requires three steps.</p>
<p>1、First of all, setting up the Yolov8 running environment on Jetson. It has become a very simple task. Users can refer to ultralytics documents or seeed documents to install Ultralytics very easily.</p>
<p>2、Next is writing the application. Here, we can also refer to the Ultralytics official documentation to design our own program. For ease of demonstration, we directly copy the example code from the documentation and modify the relevant parameters, such as the path of the input file, queuing region, etc.</p>
<p>3、Finally, run the script of this application using the Python interpreter.</p>
<p>Let's check the python code.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># import some dependencies at the beginning.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from ultralytics import YOLO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from ultralytics.solutions import queue_management</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Load the YOLO model, here you can choose which model to use.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model = YOLO("yolov8n.pt")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Select the path of the input video. It can also be an IP camera, USB camera, and so on.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cap = cv2.VideoCapture("/home/seeed/queue.mp4")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if the input video stream starts normally. if abnormally , the program will automatically exit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assert cap.isOpened(), "Error reading video file"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create a new video file to save the inference results.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">w, h, fps = (int(cap.get(x)) for x in (cv2.CAP_PROP_FRAME_WIDTH, cv2.CAP_PROP_FRAME_HEIGHT, cv2.CAP_PROP_FPS))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">video_writer = cv2.VideoWriter("queue_management.avi", cv2.VideoWriter_fourcc(*'mp4v'), fps, (int(w*0.5), int(h*0.5)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Define the queuing region. This is very interesting. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># I have an input video, but I don't know how to determine the coordinates of each point. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Therefore, I use OpenCV to open a frame of the input video,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># and then determine each point in the OpenCV window.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Let me show you how to do it. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(添加这行代码并运行 cv2.waitKey(0) 屏幕上将会出现一个新的窗口，在新窗口中移动鼠标将会实时显示鼠标的坐标)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I move the mouse in this window, the bottom right corner will display the coordinates of the mouse in the image in real-time. Then, I just need to record the points I need.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queue_region = [(380, 30), (940, 30), (940, 510), (380, 510)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Initialize the queue management object.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queue = queue_management.QueueManager()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queue.set_args(classes_names=model.names, reg_pts=queue_region, line_thickness=3, fontsize=1.0, region_color=(255, 144, 31))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Retrieve and process each frame from the video file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while cap.isOpened():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    success, im0 = cap.read()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if success:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># resize the input frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        im0 = cv2.resize(im0, (0, 0), fx=0.5, fy=0.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Invoke the YOLOv8 model to track the person object.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tracks = model.track(im0, show=False, persist=True, verbose=False, classes=0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Invoke the queue management method provided by Ultralytics.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        out = queue.process_queue(im0, tracks)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># save the result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        video_writer.write(im0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if cv2.waitKey(1) &amp; 0xFF == ord('q'):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        continue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print("Video frame is empty or video processing has been successfully completed.")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  close video and window</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cap.release()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cv2.destroyAllWindows()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, the final output of these current application is edited video, which is intended for human checking, it can not provide direct information to machines or other applications. So, I've customized a new class that base on ultralytics to direct output people flow information. Let's run this script to try it out.</p>
<p>(运行第二个脚本)</p>
<p>You can see that the number of object in the defined region is shown in real time in the terminal.</p>
<p>In fact, ultralytics can do much more than that. We can also use it to generate density maps to help retail stores plan store space in a better way.
So I'm going to show you this demo of a heat map.</p>
<p>（运行第三个脚本）</p>
<p>We can clearly see the distribution density of customers in each region during a certain period of time.</p>
<p>That is all of the live demo presentation. Thank you very much.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Update Site]]></title>
            <link>https://yuyoujiang.github.io/blog/person-info/update-site</link>
            <guid>https://yuyoujiang.github.io/blog/person-info/update-site</guid>
            <pubDate>Sat, 06 Apr 2024 15:19:13 GMT</pubDate>
            <description><![CDATA[Please refer this page for update.]]></description>
            <content:encoded><![CDATA[<p>Please refer <a href="https://docusaurus.io/docs/deployment" target="_blank" rel="noopener noreferrer">this page</a> for update.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yarn start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yarn build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmd /C "set "GIT_USER=yuyoujiang" &amp;&amp; yarn deploy"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>update</category>
        </item>
        <item>
            <title><![CDATA[Welcom]]></title>
            <link>https://yuyoujiang.github.io/blog/person-info/welcom</link>
            <guid>https://yuyoujiang.github.io/blog/person-info/welcom</guid>
            <pubDate>Sat, 06 Apr 2024 15:19:13 GMT</pubDate>
            <description><![CDATA[Hello everyone!]]></description>
            <content:encoded><![CDATA[<p>Hello everyone!</p>]]></content:encoded>
            <category>update</category>
        </item>
        <item>
            <title><![CDATA[E-mails]]></title>
            <link>https://yuyoujiang.github.io/blog/person-info/youjiang-emails</link>
            <guid>https://yuyoujiang.github.io/blog/person-info/youjiang-emails</guid>
            <pubDate>Sat, 06 Apr 2024 13:35:34 GMT</pubDate>
            <description><![CDATA[seeed studio : youjiang.yu@seeed.cc]]></description>
            <content:encoded><![CDATA[<p><strong>seeed studio :</strong> <a href="mailto:youjiang.yu@seeed.cc" target="_blank" rel="noopener noreferrer">youjiang.yu@seeed.cc</a></p>
<p><strong>google :</strong> <a href="mailto:yuyoujiang97@gmail.com" target="_blank" rel="noopener noreferrer">yuyoujiang97@gmail.com</a></p>
<p><strong>NetEase :</strong> <a href="mailto:Youjiang163@163.com" target="_blank" rel="noopener noreferrer">Youjiang163@163.com</a></p>]]></content:encoded>
            <category>email</category>
            <category>google</category>
            <category>seeed</category>
            <category>163</category>
        </item>
    </channel>
</rss>